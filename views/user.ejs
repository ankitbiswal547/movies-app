<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= user.fullname %>
    </title>
    <link rel="shortcut icon" href="<%= user.image %>" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="home-container">

        <%- include("partials/sidebar") %>

            <div class="main-content">
                <i onclick="showSidebar()" id="menu-bar" class="fa-solid fa-bars"></i>


                <!-- user -->

                <div id="movies-section" class="all-movies-content-wrapper">
                    <div class="movie-container">
                        <h1>
                            <%= user.fullname %>'s Profile
                        </h1>
                        <div class="all-movies-wrapper">

                            <!-- each movie card -->
                            <div class="each-movie">

                                <!-- image -->
                                <img src="<%= user.image %>" alt="">

                                <!-- movie info -->
                                <div class="each-movie-detail">
                                    <h3 class="each-movie-title">
                                        <%= user.fullname %>
                                    </h3>
                                </div>
                            </div>

                            <div class="user-page-right-side">

                                <!-- private playlist -->
                                <% if(currUser && currUser.username==user.username){ %>
                                    <div>
                                        <h4 class="private-public-heading">Private Playlist</h4>
                                        <% if(user.playlists.length !=0){ %>
                                            <div>
                                                <% for(let i=0; i < user.playlists.length; i++){ %>
                                                    <% if(user.playlists[i].status==="private" ){ %>
                                                        <div>
                                                            <div onclick="myPlaylist(<%= i %>)" class="playlist-title"
                                                                id="title-<%= i %>">
                                                                <%= user.playlists[i].name%>
                                                            </div>
                                                            <div id="playlist-item-<%= i %>" class="playlist-items">
                                                                <% for(let j=0; j < user.playlists[i].movies.length;
                                                                    j++){ %>
                                                                    <div>
                                                                        <%= user.playlists[i].movies[j].movieTitle %>
                                                                    </div>
                                                                    <% } %>
                                                            </div>
                                                        </div>
                                                        <% } %>
                                                            <% } %>
                                            </div>
                                            <% }else{ %>
                                                <div class="login-msg-playlist"><em>( No active playlist. )</em></div>
                                                <% } %>
                                    </div>
                                    <% } %>


                                        <div>
                                            <h4 class="private-public-heading">Public Playlist</h4>
                                            <% if(user.playlists.length !=0){ %>
                                                <div>
                                                    <% for(let i=0; i < user.playlists.length; i++){ %>
                                                        <% if(user.playlists[i].status==="public" ){ %>
                                                            <div>
                                                                <div onclick="myPlaylistUser(<%= i %>)"
                                                                    class="playlist-title" id="title-<%= i %>-<%= i %>">
                                                                    <%= user.playlists[i].name%>
                                                                </div>
                                                                <div id="playlist-item-<%= i %>-<%= i %>"
                                                                    class="playlist-items">
                                                                    <% for(let j=0; j < user.playlists[i].movies.length;
                                                                        j++){ %>
                                                                        <div>
                                                                            <%= user.playlists[i].movies[j].movieTitle
                                                                                %>
                                                                        </div>
                                                                        <% } %>
                                                                </div>
                                                            </div>
                                                            <% } %>
                                                                <% } %>
                                                </div>
                                                <% }else{ %>
                                                    <div class="login-msg-playlist"><em>( No active playlist. )</em>
                                                    </div>
                                                    <% } %>
                                        </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
    </div>

    <script src="/js/home.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>

</html>